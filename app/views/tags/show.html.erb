<% provide(:title, @tag.name) %>
<% provide(:header, @tag.name) %>

<span id="tag-info" data-tag-id="<%= @tag.id %>"></span>

<div id="tags-show-page-container">
  <div class="row" align="center">
    <% if incomplete_fundamentals_exist?(current_user, @tag) %>
      <div class="col-xs-3 data-url pointer fund-show-game-circle-container"
           data-url="/fundamentals?word_id=<%= @rand_incomp_fund_word_id %>">
        <div class="fund-show-game-circle hover white">&#9658;</div>
      </div>
    <% else %>
      <div class="col-xs-3">
        <div class="fund-show-game-circle game-not-ready white">&#9658;</div>
      </div>
    <% end %>

    <% if enough_jeopardy_words_exist?(current_user, @tag) %>
      <div class="col-xs-3 data-url pointer jeop-show-game-circle-container"
           data-url="/jeopardy_tag?word_id=<%= @rand_incomp_jeop_word_id %>;tag_id=<%= @tag.id %>">
        <div class="jeop-show-game-circle white hover">&#9658;</div>
      </div>
    <% else %>
      <div class="col-xs-3">
        <div class="jeop-show-game-circle pointer"
          data-toggle="popover" title="Why is this game locked?"
          data-content="To activate this Jeoapardy game, this tag has to have
          at least four words either ready for Jeopardy or that has completed
          Jeopardy."
          data-placement="bottom">
          <span class="glyphicon glyphicon-lock"></span>
        </div>
      </div>
    <% end %>

    <% if incomplete_freestyles_exist?(current_user, @tag) %>
      <div class="col-xs-3 data-url pointer free-show-game-circle-container"
           data-url="/freestyle?word_id=<%= @rand_incomp_free_word_id %>">
        <div class="free-show-game-circle white hover">&#9658;</div>
      </div>
    <% else %>
      <div class="col-xs-3">
        <div class="free-show-game-circle game-not-ready white">&#9658;</div>
      </div>
    <% end %>

    <% if @num_words_for_this_tag > 0 %>
      <div class="col-xs-3 pointer flashcard-show-game-circle-container"
           id="flashcards-play-btn">
        <div class="flashcard-show-game-circle hover red">
          <i class="fa fa-flash fa-2x"></i>
        </div>
      </div>
    <% else %>
      <div class="col-xs-3">
        <div class="flashcard-show-game-circle red game-not-ready">&#9658;</div>
      </div>
    <% end %>
  </div>

  <br>

  <div id="progress_bar_container">
    <div class="progress">
      <div class="progress-bar progress-bar-info"
           role="progressbar" aria-valuenow="0"
           aria-valuemin="<%= @tag_game_progress %>" aria-valuemax="100"
           style="width: <%= @tag_game_progress %>%">
          <span><%= @tag_game_progress %>%</span>
      </div>
    </div>
  </div>

  <div>
    <% if @num_words_for_this_tag > 0 %>
      <% words_for(current_user, @tag).each do |word| %>
        <span class="tag">
          <span class="basic-black-link">
            <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
            &nbsp;
            <%= link_to word.name, word %>
            &nbsp;
          </span>
          <span class="word-on-tag-show-page">
            <%= render "words/remove_word_btn_tag_show_page",
              word: word, tag: @tag %>
          </span>
        </span>
      <% end %>
    <% else %>
      <div class="alert alert-warning">
          This tag doesn't have any words.
      </div>
    <% end %>

    <div class="clear"></div>
  </div>

  <br>
</div>

<%= render "games/flashcards", num_words: @num_words_for_this_tag %>
