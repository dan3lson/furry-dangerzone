<% provide(:header, "Users (#{@user_count})") %>

<div class="text-muted filter-div">
  Filter:
  <%= link_to admin_users_path do %>
    <span class="text-primary active">
      <i class="fa fa-sort-alpha-asc"></i> Alphabetical
    </span>
  <% end %>
  |
  <%= link_to admin_users_path(filter: "latest") do %>
    <span>
      <i class="fa fa-calendar hover pointer"></i> Created by
    </span>
  <% end %>
  <div class="float-right">
    <p>
      Total Users: <%= @user_count %>
    </p>
  </div>
  <div class="clear"></div>
</div>

<%= will_paginate @users %>

<div class="clear"></div>
<div class="table-responsive">
  <table class="table table-bordered table-hover">
    <th>ID</th>
    <th>Username</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
    <th>Num Logins</th>
    <th>Last Login</th>
    <th>Joined</th>

    <% @users.each do |u| %>
    <tr>
      <td><%= u.id %></td>
      <td><%= link_to u.username, u %></td>
      <td><%= u.first_name || "-" %></td>
      <td><%= u.last_name || "-" %></td>
      <td><%= u.email || "-" %></td>
      <td><%= u.num_logins %></td>
      <td>
        <% if u.last_login.nil? %>
        -
        <% else %>
        <%= time_ago_in_words(u.last_login) %> ago</td>
        <% end %>
        <td><%= time_ago_in_words(u.created_at) %> ago</td>
      </tr>
      <% end %>
    </table>
</div>

<%= will_paginate @users %>
